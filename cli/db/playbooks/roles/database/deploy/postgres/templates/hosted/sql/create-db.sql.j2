CREATE DATABASE {{ db_name }};
\connect {{ db_name }}
CREATE USER {{ db_generated_user }};
ALTER USER {{ db_generated_user }} WITH PASSWORD '{{ db_generated_password }}' CREATEROLE;
ALTER ROLE {{ db_generated_user }} WITH SUPERUSER;
GRANT ALL ON DATABASE {{ db_name }} TO {{ db_generated_user }};
GRANT ALL PRIVILEGES ON DATABASE {{ db_name }} TO {{ db_generated_user }};
ALTER DATABASE {{ db_name }} OWNER TO {{ db_generated_user }};

-- Provision Migration User
CREATE ROLE {{ db_generated_migration_user }};
GRANT ALL ON DATABASE {{ db_name }} TO {{ db_generated_migration_user }};
GRANT ALL PRIVILEGES ON DATABASE {{ db_name }} TO {{ db_generated_migration_user }};
